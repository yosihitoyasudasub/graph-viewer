# 論理パズル解決ツール 機能仕様書

## 1. 概要

本ツールは、論理パズル（特に「嘘つきは誰か」を推理するタイプ）の解決を支援する、インタラクティブなグラフベースのアプリケーションです。ユーザーは、登場人物や証拠をノード、それらの関係をエッジとして視覚的に表現し、仮説を立てて矛盾を検証することで、論理的に答えを導き出します。

---

## 2. 機能要件

### 2.1 グラフの視覚化

* **ノード**: 登場人物、証拠、場所などの要素を円形のノードとして表示します。
* **エッジ**: ノード間の関係性（例：証言、事実）を線で結びます。

### 2.2 エッジの色の定義

* **薄いピンク色**: 証言を表すエッジのデフォルト色です。真偽は不明です。
* **緑色**: 証拠や事実を表すエッジの色です。これは常に真実です。
* **赤色**: **犯人として仮定された人物の証言**を表すエッジの色です。これは「嘘」であることを示します。

### 2.3 インタラクティブ機能

* **ノードのクリック**: ノードをクリックすると、その人物の証言や詳細情報が独立したウィンドウで表示されます。複数のウィンドウを同時に開いて比較できます。
* **エッジのホバー**: マウスカーソルをエッジの上に置くと、その関係性の内容（例：「AはBの隣人である」）がツールチップで簡潔に表示されます。
* **「犯人と仮定する」ボタン**: 人物ノードに付加されるボタンで、これを押すと以下の機能が発動します。
    * そのノードの証言を表すエッジが赤色に変化します。
    * その人物は「犯人」としてマークされ、視覚的に区別されます。
* **「リセット」ボタン**: グラフの状態を初期（犯人未定、すべての証言エッジは薄いピンク）に戻します。

### 2.4 自動矛盾検出機能

* **オン/オフ機能**: この機能はユーザーが任意にオンオフできます。
* **ハイライト**: 機能がオンの場合、仮定した犯人の証言（赤色のエッジ）が、事実（緑色のエッジ）や他の証言と論理的に矛盾する部分を自動的に検出します。矛盾が検出された場合、**関係するノードとエッジが特別なアニメーション（例：点滅）でハイライト**されます。
* **メッセージ**: 矛盾が検出された際、画面上部に「矛盾が見つかりました。この仮定は間違いです」というメッセージを表示します。

### 2.5 解決の確定

* **「解決を確定」ボタン**: 矛盾する点が一つも見つからない仮説（犯人）があった場合、その人物ノードに「解決を確定」ボタンが表示されます。
* **視覚的表現**: 解決が確定した人物ノードは、特別な視覚効果（例：金色の枠線）で表示され、パズルが解かれたことを示します。

---

## 3. 今後の提案機能

* **ヒント機能**: ユーザーが行き詰まった際、次の手がかりになりそうなノードやエッジを提案する機能を追加します。
* **タイムライン表示**: 複数の事件や証言に時間的な要素がある場合、それらを時系列で整理して表示するタイムラインビューを追加します。
* **進捗インジケーター**: 解決までに残された可能性のある犯人の数を表示するなど、進捗状況をユーザーに知らせる機能です。